{"version":3,"file":"fast-ai.global.min.js","sources":["../../src/index.ts","../../src/fastai.ts"],"sourcesContent":[null,null],"names":["detectEnvironment","window","document","hello","name","index","options","base","baseURL","replace","apiKey","Error","builder","modelName","provider","endpoint","model","chat","description","parameters","execute","async","args","Promise","resolve","schema","client","messages","role","content","system","prompt","tools","type","function","zodToJsonSchema","res","fetch","method","headers","Authorization","body","JSON","stringify","then","r","json","assistant","choices","message","submitCall","tool_calls","find","c","rawArgs","arguments","parsed","parse","object","fallback","_err","onToolCall","messageHistory","toolMap","Map","toolsInput","Array","isArray","t","set","Object","entries","toolsJsonSchema","size","from","values","map","undefined","push","length","text","forEach","call","tool","get","result","tool_call_id","id"],"mappings":"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"}